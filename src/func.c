#include "../include/header.h"

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void display_wrong(char wrong_guesses[], int num_wrong)
{
    /* This function called in display_board() */

    if (num_wrong > 0)
    {
        printf("\t\t\tWrong guesses: ");
        for (int i = 0; i < 6; i++)
        {
            if (wrong_guesses[i] != 0)
            {
                if (num_wrong == i + 1)
                {
                    printf("%c", wrong_guesses[i]);
                }
                else
                {
                    printf("%c, ", wrong_guesses[i]);
                }
            }
        }
    }

}
char *inf_buffer(char *prompt)
{
    printf("%s", prompt);

    // Allocate initial char for user input
    char *s = malloc(sizeof(int8_t));
    if (s == NULL) {
        printf("Error: failed to allocate buffer for user input\n");
        exit(1);
    }

    // Scan command line until '\n'
    uint64_t i = 0;
    while (true) {
        int8_t test_char = getchar();
        if (test_char == EOF) {
            printf("Error: failed to scan command line for user input\n");
            exit(2);
        }

        s[i] = test_char;
        if (s[i] == '\n') {
            s[i] = '\0';
            break;
        }
        else {
            // Reallocate
            s = realloc(s, sizeof(int8_t)*(i+2));
                if (s == NULL) {
                    printf("Error: failed to reallocate buffer for user input\n");
                    exit(3);
                }
                i++;
        }
    }

    return s;
}
void print_board(char correct_guesses[], char p1_input[], char s[], int l, char wrong_guesses[], int num_wrong)
{
    // DISPLAY WRONG guesses under hangman
    display_wrong(wrong_guesses, num_wrong);

    printf("\nCorrect Guesses:\n\n");
    for (int i = 0; i < l; i++)
    {
        if (s[i] == ' ' )
        {
            printf("  ");
        }
        else if (tolower(correct_guesses[i]) == tolower(s[i]))
        {
            printf("%c ", p1_input[i]);
        }
        else if (isalpha(p1_input[i]))
        {
            printf("_ ");
        }
        else
        {
            printf("%c", p1_input[i]);
        }
    }
    printf("\n\n");
    printf("Body parts remaining: %i\n", 6-num_wrong);
}
void display_hangman(int wrong)
{
// printf("_|___|___|___|___|___|___|___|___|___|___|___|___|___|___|___|___|___|");
printf("_|___|___|___|___|___|___|___|___|___|___|___|___|___|___|___|___|___|");
printf("\n___|___|___|___|___|___|___|___|___|___|___|___|___|___|___|___|___|__\n");
    if (wrong == 0)
    {
        printf("_|___|___|___|___|___|__  +---+ _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___   |   | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|__      | _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___       | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|_       | _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___       | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|_ ========= ___|___|___|___|___|___|___|___|___|\n"); // Blank hangman
    }
    else if (wrong == 1)
    {
        printf("_|___|___|___|___|___|__  +---+ _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___   |   | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|_   O   | _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___       | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|_       | _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___       | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|_ ========= ___|___|___|___|___|___|___|___|___|\n");
    }
    else if (wrong == 2)
    {
        printf("_|___|___|___|___|___|__  +---+ _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___   |   | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|_   O   | _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___  /    | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|_       | _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___       | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|_ ========= ___|___|___|___|___|___|___|___|___|\n");
    }
    else if (wrong == 3)
    {
        printf("_|___|___|___|___|___|__  +---+ _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___   |   | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|_   O   | _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___  /|   | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|_       | _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___       | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|_ ========= ___|___|___|___|___|___|___|___|___|\n");
    }
    else if (wrong == 4)
    {
        printf("_|___|___|___|___|___|__  +---+ _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___   |   | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|_   O   | _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___  /|\\  | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|_       | _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___       | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|_ ========= ___|___|___|___|___|___|___|___|___|\n");
    }
    else if (wrong == 5)
    {
        printf("_|___|___|___|___|___|__  +---+ _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___   |   | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|_   O   | _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___  /|\\  | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|_  /    | _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___       | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|_ ========= ___|___|___|___|___|___|___|___|___|\n");
    }
    else
    {
        printf("_|___|___|___|___|___|__  +---+ _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___   |   | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|_   O   | _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___  /|\\  | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|_  / \\  | _|___|___|___|___|___|___|___|___|___|\n___|___|___|___|___|___       | ___|___|___|___|___|___|___|___|___|__\n_|___|___|___|___|___|_ ========= ___|___|___|___|___|___|___|___|___|\n"); // Full hangman
    }
}

void dont_scroll_up(void)
{
    for (int i = 0; i < 45; i++){printf("\n");}
    printf("  ~~~~~~~~~~ DON'T SCROLL UP, THAT'S CHEATING!!! ~~~~~~~~~~~~\n");
}